# System Patterns

Этот файл документирует повторяющиеся паттерны и стандарты, используемые в проекте.
2026-01-12 16:58:30 - Последняя редакция базового описания.

## Правила редактирования

* Обновлять, когда вводятся новые архитектурные паттерны или изменяются существующие.
* Всегда включать временную метку в формате [ГГГГ-ММ-ДД ЧЧ:ММ:СС] - [Описание паттерна/изменения].
* Записи в разделах должны быть отсортированы в обратном хронологическом порядке (самые новые сверху, старые внизу).
* Разделы должны быть отсортированы по важности: Паттерны кодирования, Архитектурные паттерны, Паттерны тестирования.
2026-01-12 16:58:30 - Последняя редакция правил редактирования.

## Паттерны кодирования

2026-01-12 16:58:30 - Паттерны кодирования
* **Декораторы для измерения времени**: Использование декоратора `@timeit` для измерения времени выполнения функций
* **Логирование**: Использование стандартного модуля logging для логирования с настройкой уровня в зависимости от режима отладки
* **Обработка ошибок**: Использование try-except блоков с логированием ошибок и возвратом значений по умолчанию
* **Контекстные менеджеры**: Использование `with` для работы с соединениями базы данных
* **Типизация**: Использование аннотаций типов из модуля typing для улучшения читаемости кода
* **Параметры по умолчанию**: Использование значений из конфигурации, если параметры не указаны явно

## Архитектурные паттерны

2026-01-12 16:58:30 - Архитектурные паттерны
* **RAG (Retrieval-Augmented Generation)**: Поиск релевантных документов и генерация ответов на их основе
* **Кэширование**: Сохранение эмбеддингов в базе данных для повторного использования
* **Иерархическая структура данных**: Организация элементов в виде дерева с родительскими и дочерними элементами
* **Конфигурация**: Централизованное хранение настроек в модуле config.py и базе данных
* **Модульность**: Разделение функциональности по отдельным модулям (embeddings.py, retrieval.py, rag.py и т.д.)
* **CLI Интерфейс**: Использование argparse для обработки параметров командной строки с иерархической структурой команд
* **Интерактивный режим отладки**: Возможность настройки параметров в процессе выполнения

## Паттерны тестирования

2026-01-12 16:58:30 - Паттерны тестирования
* Отсутствуют явные паттерны тестирования в текущей кодовой базе
* Рекомендуется добавить:
  * Модульные тесты для отдельных компонентов
  * Интеграционные тесты для проверки взаимодействия компонентов
  * Тесты производительности для выявления узких мест
  * Тесты качества ответов для оценки релевантности и точности