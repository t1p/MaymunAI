# System Patterns

Этот файл документирует повторяющиеся паттерны и стандарты, используемые в проекте.
2026-01-12 18:38:00 - Последняя редакция базового описания.

## Правила редактирования

* Обновлять, когда вводятся новые архитектурные паттерны или изменяются существующие.
* Всегда включать временную метку в формате [ГГГГ-ММ-ДД ЧЧ:ММ:СС] - [Описание паттерна/изменения].
* Записи в разделах должны быть отсортированы в обратном хронологическом порядке (самые новые сверху, старые внизу).
* Разделы должны быть отсортированы по важности: Паттерны кодирования, Архитектурные паттерны, Паттерны тестирования.
2026-01-12 18:38:00 - Последняя редакция правил редактирования.

## Паттерны кодирования

2025-05-16 03:41:23 - Добавлен паттерн MemoryBankIntegration
2025-03-30 00:02:47 - Инициализация паттернов кодирования
* **Декораторы для измерения времени**: Использование декоратора `@timeit` для измерения времени выполнения функций
* **Логирование**: Использование стандартного модуля logging для логирования с настройкой уровня в зависимости от режима отладки
* **Обработка ошибок**: Использование try-except блоков с логированием ошибок и возвратом значений по умолчанию
* **Контекстные менеджеры**: Использование `with` для работы с соединениями базы данных
* **Типизация**: Использование аннотаций типов из модуля typing для улучшения читаемости кода
* **Параметры по умолчанию**: Использование значений из конфигурации, если параметры не указаны явно

## Архитектурные паттерны

2025-05-16 03:41:23 - Добавлен паттерн MemoryBankIntegration
2025-03-30 00:02:47 - Инициализация архитектурных паттернов
* **MemoryBankIntegration**: Интеграция с системой Memory Bank для сохранения контекста проекта
  * Цель интеграции: Обеспечение долгосрочного хранения контекста проекта, решений и прогресса для улучшения преемственности и документирования
  * Стандартные операции:
    * Инициализация Memory Bank при создании проекта
    * Регулярное обновление файлов контекста при значимых изменениях
    * Чтение контекста при начале новой сессии работы
    * Синхронизация между различными режимами работы
  * Ожидаемое поведение:
    * Автоматическое сохранение важных решений в decisionLog.md
    * Обновление текущего контекста в activeContext.md
    * Отслеживание прогресса в progress.md
    * Документирование системных паттернов в systemPatterns.md
* **Система оценки**: Метрики precision@k, recall и NDCG для объективной оценки качества
* **Реранжирование**: Использование кросс-энкодеров для улучшения порядка результатов поиска
* **Семантическое чанкование**: Разбиение документов по смысловым границам с перекрытием
* **Гибридный поиск**: Комбинация векторного (семантического) и текстового (BM25) поиска с настраиваемыми весами
* **Интерактивный режим отладки**: Возможность настройки параметров в процессе выполнения
* **CLI Интерфейс**: Использование argparse для обработки параметров командной строки с иерархической структурой команд
* **Модульность**: Разделение функциональности по отдельным модулям (embeddings.py, retrieval.py, rag.py и т.д.)
* **Конфигурация**: Централизованное хранение настроек в модуле config.py и базе данных
* **Иерархическая структура данных**: Организация элементов в виде дерева с родительскими и дочерними элементами
* **Кэширование**: Сохранение эмбеддингов в базе данных для повторного использования
* **RAG (Retrieval-Augmented Generation)**: Поиск релевантных документов и генерация ответов на их основе

## Паттерны тестирования

2025-03-30 00:02:47 - Инициализация паттернов тестирования
* Отсутствуют явные паттерны тестирования в текущей кодовой базе
* Рекомендуется добавить:
  * Модульные тесты для отдельных компонентов
  * Интеграционные тесты для проверки взаимодействия компонентов
  * Тесты производительности для выявления узких мест
  * Тесты качества ответов для оценки релевантности и точности

^1: 2025-03-30 00:02:47 - Инициализация файла.
^2: 2026-01-12 18:38:00 - Обновление в рамках оптимизации Memory Bank.