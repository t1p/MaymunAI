[2025-04-02 01:12:10] - Решение: Полная синхронизация документации схемы БД с актуальной структурой через MCP запрос. Добавлены недостающие таблицы, индексы и связи.
# Decision Log

This file records architectural and implementation decisions using a list format.
2025-03-30 00:02:32 - Log of updates made.

*

## Decision

* Использование технологии RAG (Retrieval-Augmented Generation) для создания персонального ассистента
* Выбор PostgreSQL в качестве базы данных для хранения элементов и эмбеддингов
* Использование моделей OpenAI для генерации эмбеддингов и ответов
* Реализация кэширования эмбеддингов для повышения производительности
* Создание иерархической структуры данных с родительскими и дочерними элементами
* Разработка интерактивного режима отладки с возможностью настройки параметров

## Rationale 

* RAG позволяет генерировать ответы на основе конкретной базы знаний, что повышает точность и релевантность ответов
* PostgreSQL обеспечивает надежное хранение данных и поддерживает векторные операции для работы с эмбеддингами
* Модели OpenAI предоставляют высококачественные эмбеддинги и генерацию текста
* Кэширование эмбеддингов снижает количество запросов к API и ускоряет работу системы
* Иерархическая структура данных позволяет лучше организовать информацию и учитывать контекст
* Интерактивный режим отладки упрощает разработку и настройку системы

## Implementation Details

* Использование text-embedding-3-large для генерации эмбеддингов с размерностью 3072
* Использование gpt-4-turbo-preview для генерации ответов
* Хранение эмбеддингов в базе данных с использованием типа VECTOR
* Реализация косинусного сходства для поиска релевантных документов
* Использование порогового значения сходства для фильтрации результатов

| 2025-03-30 20:10:09 | Documenting launch parameters | Improve project documentation | Added detailed launch parameters description to productContext.md and systemPatterns.md |
* Автоматическая генерация ключевых слов для запросов с использованием GPT-3.5 Turbo
* Реализация механизма миграции базы данных для обновления схемы

[2025-04-07 00:20:00] - Реализация гибридного поиска (векторный + BM25)
- Детали: Комбинация векторного поиска (text-embedding-3-large) и текстового поиска (BM25) с настраиваемыми весами
- Обоснование: Улучшение точности поиска за счет комбинации семантического и лексического поиска
- Имплементация: retrieval.py, параметры в config.py

[2025-04-07 00:20:00] - Семантическое чанкование документов
- Детали: Разбиение документов по смысловым границам с перекрывающимися чанками
- Обоснование: Улучшение качества контекста для генерации ответов
- Имплементация: embeddings.py, параметры чанков в config.py

[2025-04-07 00:20:00] - Реранжирование результатов с кросс-энкодером
- Детали: Использование bge-reranker-base для улучшения порядка результатов поиска
- Обоснование: Повышение релевантности топовых результатов
- Имплементация: retrieval.py, кэширование результатов

[2025-04-07 00:20:00] - Система оценки качества
- Детали: Внедрение метрик precision@k, recall, NDCG
- Обоснование: Объективная оценка качества поиска и генерации
- Имплементация: evaluation.py, тестовые сценарии в tests/