# Product Context

Этот файл предоставляет общий обзор проекта и ожидаемого продукта. Он основан на информации из файлов проекта в рабочей директории.
2026-01-12 16:58:30 - Последняя редакция базового описания.

## Правила редактирования

* Обновлять, когда значительно изменяется высокоуровневое описание проекта, цели, функции или общая архитектура.
* Временная метка и краткое описание изменения должны быть добавлены в виде сносок в конец файла.
* Записи в разделах должны быть отсортированы в обратном хронологическом порядке (самые новые сверху, старые внизу).
* Разделы должны быть отсортированы по важности: Проектная цель, Ключевые особенности, Общая архитектура, Архитектурные решения для кросс-платформенности.
2026-01-12 16:58:30 - Последняя редакция правил редактирования.

## Проектная цель

* MaymunAI - это персональный ассистент, который использует технологию RAG (Retrieval-Augmented Generation) для ответов на вопросы пользователя на основе базы знаний, хранящейся в PostgreSQL.

## Ключевые особенности

* Семантический поиск с использованием эмбеддингов OpenAI (text-embedding-3-large)
* Генерация ответов с использованием GPT-4 Turbo
* Поиск по ключевым словам и автоматическая генерация ключевых слов для запросов
* Иерархическая структура данных с родительскими и дочерними элементами
* Кэширование эмбеддингов для оптимизации производительности
* Интерактивный режим отладки с возможностью настройки параметров
* Анализ базы данных и миграция схемы

## Общая архитектура

* **База данных**: PostgreSQL для хранения элементов (items) и их эмбеддингов
* **Эмбеддинги**: Использование OpenAI API для создания векторных представлений текста
* **Поиск**: Семантический поиск с использованием косинусного сходства между эмбеддингами
* **Генерация**: Использование GPT-4 Turbo для генерации ответов на основе найденного контекста
* **Параметры запуска**:
  * `-d`, `--debug` - Включить режим отладки
  * `-dd`, `--debug_extended` - Расширенный режим отладки
  * `-i`, `--info` - Просмотр информации о блоках
  * `-n NAME`, `--name NAME` - Поиск блока по названию
  * `-b ID`, `--block-id ID` - Просмотр информации по ID блока
  * `-r MARKERS`, `--roots MARKERS` - Корневые маркеры для поиска
  * `-v`, `--view-tree` - Показать дерево элементов
  * `-s TEXT`, `--search TEXT` - Поиск по тексту в базе данных
  * `-c N`, `--context N` - Размер контекста при поиске (по умолчанию: 2)
  * `--clear-cache` - Очистить кэш эмбеддингов
  * `--preload` - Предзагрузить эмбеддинги частых запросов
  * `--migrate` - Обновить структуру базы данных
  * `--rebuild-tables` - Перестроить таблицы эмбеддингов
  * `--clear-invalid` - Очистить эмбеддинги с неправильной размерностью
  * `--parent-context N` - Уровни родительского контекста (0 - отключено)
  * `--child-context N` - Уровни дочернего контекста (0 - отключено)
* **Интерфейс**: Консольное приложение с интерактивным режимом взаимодействия
* **Отладка**: Расширенные возможности отладки и анализа работы системы

## Архитектурные решения для кросс-платформенности

* Использование Python для обеспечения совместимости с Windows, Linux и macOS
* Конфигурация Git для обработки окончаний строк (CRLF/LF) в различных ОС
* Хранение конфиденциальных данных в переменных окружения для независимости от платформы

^1: 2025-03-30 00:01:44 - Инициализация файла с описанием проекта.
^2: 2026-01-12 16:58:30 - Оптимизация файла: перевод на русский, добавление разделов и структур согласно инструкциям.
^3: 2026-01-12 18:38:00 - Обновление в рамках оптимизации Memory Bank.